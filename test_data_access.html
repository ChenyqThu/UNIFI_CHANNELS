<!DOCTYPE html>
<html>
<head>
    <title>Test Data Access</title>
</head>
<body>
    <h1>Test Data Access</h1>
    <div id="output"></div>
    
    <script>
        async function testDataAccess() {
            try {
                console.log('Testing data access...')
                
                // 测试数据文件是否可以访问
                const response = await fetch('/data/distributors.json')
                const data = await response.json()
                
                console.log('Data loaded successfully:', data)
                console.log('Regions:', data.data.regions)
                
                // 显示结果
                const output = document.getElementById('output')
                output.innerHTML = `
                    <h2>Data Load Test Results:</h2>
                    <p><strong>Success:</strong> ${data.success}</p>
                    <p><strong>Total Count:</strong> ${data.data.totalCount}</p>
                    <p><strong>Active Count:</strong> ${data.data.activeCount}</p>
                    <p><strong>Regions:</strong></p>
                    <ul>
                        ${Object.entries(data.data.regions).map(([key, region]) => 
                            `<li>${key}: ${region.name} - ${region.count} distributors at [${region.coordinates.join(', ')}]</li>`
                        ).join('')}
                    </ul>
                `
                
                // 测试 ECharts 数据格式
                console.log('Testing ECharts data format...')
                const chartData = Object.entries(data.data.regions).map(([key, region]) => ({
                    name: region.name,
                    value: [region.coordinates[0], region.coordinates[1], region.count],
                    growth: region.growth
                }))
                
                console.log('ECharts data points:', chartData)
                
                output.innerHTML += `
                    <h3>ECharts Data Points:</h3>
                    <pre>${JSON.stringify(chartData, null, 2)}</pre>
                `
                
            } catch (error) {
                console.error('Data access test failed:', error)
                document.getElementById('output').innerHTML = `
                    <h2>Error:</h2>
                    <p style="color: red;">${error.message}</p>
                `
            }
        }
        
        // 页面加载后运行测试
        testDataAccess()
    </script>
</body>
</html>